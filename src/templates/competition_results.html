{% extends 'base.html' %}
{% block content %}
  <h2>Results for {{ competition.name }}</h2>

  {% if user_participant %}
    <p><strong>Your Rank:</strong> {{ user_rank }}</p>
    <p><strong>Your Total:</strong>
      {% if competition.competition_type == "steps" %}
        {{ user_participant.steps }} steps
      {% else %}
        {{ user_participant.exercise_minutes }} minutes
      {% endif %}
    </p>
  {% else %}
    <p>You did not participate in this competition.</p>
  {% endif %}

  <h3>Leaderboard</h3>
  <table>
    <tr>
      <th>Rank</th>
      <th>User</th>
      <th>
        {% if competition.competition_type == "steps" %}
          Steps
        {% else %}
          Exercise Minutes
        {% endif %}
      </th>
    </tr>
    {% for participant in leaderboard %}
      <tr {% if participant.user == user %}style="font-weight: bold;"{% endif %}>
        <td>{{ forloop.counter }}</td>
        <td>{{ participant.user.username }}</td>
        <td>
          {% if competition.competition_type == "steps" %}
            {{ participant.steps }}
          {% else %}
            {{ participant.exercise_minutes }}
          {% endif %}
        </td>
      </tr>
    {% endfor %}
  </table>
{% endblock %}
